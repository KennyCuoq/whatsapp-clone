<% if @message.errors.any? %>
  // figure out later
<% else %>
  // Selects message container and appends message into it
  // Getting Uncaught SyntaxError: Identifier * has already been declared
  // so i have to work around it by not naming the variable (dirty work around)
  function removePreviousBubbleArrow() {
    const allMessages = document.querySelectorAll('.bubble')
    const lastMessage = allMessages[allMessages.length-1]
    if (lastMessage.classList.contains('sent')) {
      const bubbleArrow = lastMessage.lastElementChild;
      bubbleArrow.remove();
    }
  }

  function appendMessage() {
    const messagesContainer = document.querySelector('.container-messages');
    messagesContainer.insertAdjacentHTML('beforeend', '<%= j render "message", message: @message, was_sent_by_user: true %>');
  }

  removePreviousBubbleArrow();
  appendMessage();
  scrollLastMessageIntoView();
<% end %>
